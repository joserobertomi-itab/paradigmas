<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GeoDB K-means</title>
  </head>
  <body>
    <div id="app">
      <!-- Top Bar -->
      <header class="top-bar">
        <div class="search-section">
          <input 
            type="text" 
            id="city-search-input" 
            class="search-input" 
            placeholder="Nome da cidade..."
          />
          <select id="sort-select" class="sort-select">
            <option value="population-desc" selected>População (maior → menor)</option>
            <option value="population-asc">População (menor → maior)</option>
            <option value="name-asc">Nome (A → Z)</option>
            <option value="name-desc">Nome (Z → A)</option>
          </select>
          <button id="search-btn" class="btn btn-primary">Buscar</button>
        </div>
        
        <div class="pagination-section">
          <button id="prev-page-btn" class="btn btn-secondary">Página anterior</button>
          <span class="page-info">
            Página: <span id="current-page">1</span> | 
            Total carregado: <span id="total-loaded">0</span>
          </span>
          <button id="next-page-btn" class="btn btn-secondary">Próxima página</button>
        </div>
      </header>

      <!-- Main Content: 2 Columns -->
      <main class="main-content">
        <!-- Left Column: API Results -->
        <section class="column-left">
          <h2>Resultados da API</h2>
          <div id="api-results-container" class="results-container">
            <!-- Results will be rendered here -->
          </div>
        </section>

        <!-- Right Column: Selected Cities -->
        <section class="column-right">
          <div class="selected-header">
            <h2>Cidades Selecionadas</h2>
            <div class="selected-info">
              <span>Total: <strong id="selected-count">0</strong></span>
              <button id="clear-selected-btn" class="btn btn-secondary btn-small">Limpar selecionadas</button>
            </div>
          </div>
          <div id="selected-cities-container" class="results-container">
            <!-- Selected cities will be rendered here -->
          </div>
        </section>
      </main>

      <!-- Processing Section -->
      <section class="processing-section">
        <h2>Processamento</h2>
        <div class="processing-controls">
          <div class="k-input-group">
            <label for="radiusInput">Raio (km):</label>
            <input 
              type="number" 
              id="radiusInput" 
              class="k-input" 
              min="1" 
              max="500" 
              step="1" 
              value="100"
            />
          </div>
          <div class="k-input-group">
            <label for="kInput">k (número de clusters):</label>
            <input 
              type="number" 
              id="kInput" 
              class="k-input" 
              min="2" 
              max="50" 
              step="1" 
              value="5"
            />
          </div>
          <button id="runBulkKmeansBtn" class="btn btn-process">
            Carregar cidades (API) + Rodar K-means
          </button>
          <button id="cancel-btn" class="btn btn-danger" style="display: none;">
            Cancelar
          </button>
        </div>

        <div class="processing-status">
          <div class="status-info">
            <span>Status: </span>
            <span id="statusText" class="status-text status-idle">idle</span>
          </div>
          <div class="progress-container">
            <label for="progressBar">Progresso:</label>
            <progress id="progressBar" class="progress-bar" value="0" max="100">0%</progress>
            <span id="progress-text" class="progress-text">0%</span>
          </div>
        </div>

        <div class="logs-container">
          <label for="logBox">Logs:</label>
          <textarea 
            id="logBox" 
            class="logs-textarea" 
            readonly
            rows="10"
          ></textarea>
        </div>
      </section>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
